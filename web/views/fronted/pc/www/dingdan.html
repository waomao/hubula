<link href="/public/css/dingdan.css" rel="stylesheet">
<script src="/public/js/jss.js"></script>
<div style="text-align: center;font-size: 22px;height: 500px;padding: 0;">
    订单{{.Channel}} {{.DataList}}<br/>
    <div class="waikuang">
        <div class="lishiuser" id="you">
            <table class="table table-hover table-bordered" id="mytable">
                <thead>
                <tr>
                    <div id="lianxiren">uuu</div>
                </tr>
                <tr><th>编号</th><th>姓名</th><th>密码</th>
                    <th>生日</th><th>地址</th><th>操作</th>
                </tr>
                </thead>
                <tbody id="listTable">

                </tbody>
            </table>
        </div>

        <div class="biaodan">
            <form  id="reg" action="" method="post">
                <div class="shang">
                    <table class="table table-hover table-bordered">
                        <tr>
                            取单信息
                        </tr>
                        <tr>
                            <input type="hidden" name="jid" class="form-control" id="jid" />
                        </tr>
                        <tr>
                            <th>姓名</th>
                            <td><input type="text" name="jname" class="form-control" id="jname" /></td>
                        </tr>
                        <tr>
                            <th>电话</th>
                            <td><input type="text" name="jtel" class="form-control" id="jtel" /></td>
                        </tr>
                        <tr>
                            <th>地址</th>
                            <td><input type="date" name="jadd" class="form-control" id="jadd" /></td>
                        </tr>
                        <tr>
                            <th>备注</th>
                            <td><input type="text" name="jbeizhu" class="form-control" id="jbeizhu" /></td>
                        </tr>
                    </table>

                </div>

                <div class="xia">
                    <table class="table table-hover table-bordered">
                        <tr>
                            送达信息
                        </tr>
                        <tr>
                            <input type="hidden" name="sid" class="form-control" id="sid" />
                        </tr>
                        <tr>
                            <th>姓名</th>
                            <td><input type="text" name="sname" class="form-control" id="sname" /></td>
                        </tr>
                        <tr>
                            <th>电话</th>
                            <td><input type="text" name="stel" class="form-control" id="stel" /></td>
                        </tr>
                        <tr>
                            <th>地址</th>
                            <td><input type="date" name="sadd" class="form-control" id="sadd" /></td>
                        </tr>


                        <div class="case">
                            <div class="bMap" id='case2'></div>
                        </div>

                        <tr>
                            <th>备注</th>
                            <td><input type="text" name="sbeizhu" class="form-control" id="sbeizhu" /></td>
                        </tr>
                    </table>

                </div>

                价格
                下单时间


                <input type="reset" value="重置" class="btn btn-primary" id="reset" />
                <input type="button" value="添加"  class="btn btn-success" id="add"  onclick="addList()" />
                <input type="button" value="更新"  class="btn btn-info" id=""  onclick="update()" />

                <input type="submit" value="用户注册">

            </form>
        </div>
    </div>
</div>


<script type="text/javascript">

    $(document).ready(function(){
        // $("input").focus(function(){
        //   $("input").css("background-color","#FFFFCC");
        // });
        // $("input").blur(function(){
        //   $("input").css("background-color","#D6D6FF");
        // });
        $("#jname").blur(function(){
            var jname = encodeURI($("#jname").val());
            //alert(jname);
            $.ajax({
                url:'/lxrname?name='+jname, //请求验证页面
                type:"GET", //请求方式 可换为post 注意验证页面接收方式
                data:"user="+$("#usernamea").val(), //取得表文本框数据，作为提交数据 注意前面的 user 此处格式 key=value 其他方式请参考ajax手册
                dataType:'json',
                success: function(data) {
                    //请求成功时执行操作
                    //var dataObject = JSON.parse(data);
                    console.log(data);
                    //alert(data.aa);
                    var sr = '';
                    $.each(data.bb, function(index,values){
                        sr += '<tr>'+
                            '<td>'+values.id+'</td>'+
                            '<td>'+values.url+'</td>'+
                            '<td>123456</td>'+
                            '<td>1995-08-07</td>'+
                            '<td>北京市朝阳区艾欧尼亚</td>'+
                            '<td>'+
                            '<input type="button" name="" value="选择寄件人" class="btn btn-info" id="up" />'+
                            '</td>'+
                            '</tr>';
                        //         $.each(values, function(index2,value){
                        //             sr += '<h1>'+value+'</h1>';
                        //             console.log(data);
                        //         });
                    });
                    $("#listTable").html(sr); //向ID为chk的元素内添加html代码
                    $("#lianxiren").html("寄件联系人");
                },

                // for (var i = 0 ;i < data.lenghth;i++)
            });
        });



        $("#sname").blur(function(){
            $.ajax({
                url:"/nihao?url=9", //请求验证页面
                type:"GET", //请求方式 可换为post 注意验证页面接收方式
                data:"user="+$("#usernamea").val(), //取得表文本框数据，作为提交数据 注意前面的 user 此处格式 key=value 其他方式请参考ajax手册
                dataType:'json',
                success: function(data) {
                    //请求成功时执行操作
                    //var dataObject = JSON.parse(data);
                    console.log(data);
                    //alert(data.aa);
                    var sr = '';
                    $.each(data.bb, function(index,values){
                        sr += '<tr>'+
                            '<td>'+values.id+'</td>'+
                            '<td>'+values.url+'</td>'+
                            '<td>123456</td>'+
                            '<td>1995-08-07</td>'+
                            '<td>北京市朝阳区艾欧尼亚</td>'+
                            '<td>'+
                            '<input type="button" name="" value="选择寄件人" class="btn btn-info" id="ss" />'+
                            '</td>'+
                            '</tr>';
                        //         $.each(values, function(index2,value){
                        //             sr += '<h1>'+value+'</h1>';
                        //             console.log(data);
                        //         });
                    });
                    $("#listTable").html(sr); //向ID为chk的元素内添加html代码
                    $("#lianxiren").html("收件联系人");
                },

                // for (var i = 0 ;i < data.lenghth;i++)
            });
        });


//更新操作
//定义全局变量，用于存放要修改的行号
//var row=0;
        $('#listTable').on('click','#up',function(){
            //获取最后一个td前面所有的td节点
            var val=$(this).parent().prevAll();
            var arr=[];
            //通过循环将所有td里面的文本放到数组里面
            for(var i=0;i<val.length;i++){
                arr[arr.length]=val.eq(i).text();
            };
            //得到的arr数组与表格顺序相反
            //将arr数组逆序与表格顺序相同，以便依次填到input中
            var arr1=arr.reverse();
            //for(var j=0;j<$('form input').length;j++)
            for(var j=0;j<val.length;j++){
                $('form input').eq(j).val(arr1[j])
            };
            //i是该行所在的行号
            //var i=$('table').find("tr").index(val.parent()[0]);
            //console.log(i);
            //row=i;
        });

        $('#listTable').on('click','#ss',function(){
            //获取最后一个td前面所有的td节点
            var val=$(this).parent().prevAll();
            var arr=[];
            //通过循环将所有td里面的文本放到数组里面
            for(var i=0;i<val.length;i++){
                arr[arr.length]=val.eq(i).text();
            };
            //得到的arr数组与表格顺序相反
            //将arr数组逆序与表格顺序相同，以便依次填到input中
            var arr1=arr.reverse();
            //for(var j=0;j<$('form input').length;j++)
            for(var j=0;j<val.length;j++){
                $('form input').eq(j+5).val(arr1[j])
            };
            //i是该行所在的行号
            //var i=$('table').find("tr").index(val.parent()[0]);
            //console.log(i);
            //row=i;
        });




    });

</script>

//方式一 jQuery(普通应用时推荐，简单易用)
$("#user").blur(function(){ //文本框鼠标焦点消失事件
$.get("check_user.php?user="+$("#user").val(),null,function(data) //此处get方式 可换为post方式按需求调整，其他无需修改使用方式一样
{
$("#chk").html(data); //向ID为chk的元素内添加html代码
});
})




$(function(){

})
